---
- name: Create Jenkins group
  group:
    name: jenkins
    state: present
- name: Create Jenkins user
  user:
    name: jenkins
    group: jenkins
- name: Install Build Pipeline Plugin
  jenkins_plugin:
    name: build-pipeline-plugin
    state: latest
    params: "{{ jenkins_params_plugins }}"
- name: Install Publish Over SSH Plugin
  jenkins_plugin:
    name: publish-over-ssh
    state: latest
    params: "{{ jenkins_params_plugins }}"
- name: Install SSH Plugin
  jenkins_plugin:
    name: ssh
    state: latest
    params: "{{ jenkins_params_plugins }}"
- name: Install SonarQube Plugin
  jenkins_plugin:
    name: sonarqube
    state: latest
    params: "{{ jenkins_params_plugins }}"
- name: Install Artifactory Plugin
  jenkins_plugin:
    name: artifactory
    state: latest
    params: "{{ jenkins_params_plugins }}"
- name: Create Build job
  jenkins_job:
    config: "{{ lookup('file', 'files/build.xml') }}"
    name: build
    params: "{{ jenkins_params_jobs }}"
